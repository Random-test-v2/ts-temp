/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { tasksCreateTask } from "../funcs/tasksCreateTask.js";
import { tasksDownloadTaskExport } from "../funcs/tasksDownloadTaskExport.js";
import { tasksGetTask } from "../funcs/tasksGetTask.js";
import { tasksGetTaskResult } from "../funcs/tasksGetTaskResult.js";
import { tasksListTasks } from "../funcs/tasksListTasks.js";
import { tasksUpdateTaskStatus } from "../funcs/tasksUpdateTaskStatus.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as operations from "./models/operations/index.js";
import * as shared from "./models/shared/index.js";
import { unwrapAsync } from "./types/fp.js";

export class Tasks extends ClientSDK {
  /**
   * Create a new task
   *
   * @remarks
   * Use when submitting a file or job for async processing (e.g. export or import). Returns task ID to poll for status and result.
   */
  async createTask(
    request: shared.DtoCreateTaskRequest,
    options?: RequestOptions,
  ): Promise<operations.CreateTaskResponse> {
    return unwrapAsync(tasksCreateTask(
      this,
      request,
      options,
    ));
  }

  /**
   * Download task export file
   *
   * @remarks
   * Use when letting a user download an exported file (e.g. report or data export). Returns a presigned URL; supports FlexPrice or customer-owned S3.
   */
  async downloadTaskExport(
    request: operations.DownloadTaskExportRequest,
    options?: RequestOptions,
  ): Promise<operations.DownloadTaskExportResponse> {
    return unwrapAsync(tasksDownloadTaskExport(
      this,
      request,
      options,
    ));
  }

  /**
   * Get a task
   *
   * @remarks
   * Use when checking task status or progress (e.g. polling after create). Returns task by ID.
   */
  async getTask(
    request: operations.GetTaskRequest,
    options?: RequestOptions,
  ): Promise<operations.GetTaskResponse> {
    return unwrapAsync(tasksGetTask(
      this,
      request,
      options,
    ));
  }

  /**
   * Get task processing result
   *
   * @remarks
   * Use when fetching the outcome of a completed task (e.g. export URL or error message). Call after task status is complete.
   */
  async getTaskResult(
    request: operations.GetTaskResultRequest,
    options?: RequestOptions,
  ): Promise<operations.GetTaskResultResponse> {
    return unwrapAsync(tasksGetTaskResult(
      this,
      request,
      options,
    ));
  }

  /**
   * List tasks
   *
   * @remarks
   * Use when listing or searching async tasks (e.g. admin queue view). Returns list with optional filtering.
   */
  async listTasks(
    request?: operations.ListTasksRequest | undefined,
    options?: RequestOptions,
  ): Promise<operations.ListTasksResponse> {
    return unwrapAsync(tasksListTasks(
      this,
      request,
      options,
    ));
  }

  /**
   * Update task status
   *
   * @remarks
   * Use when updating task status (e.g. marking complete or failed from a worker). Typically called by backend processors.
   */
  async updateTaskStatus(
    request: operations.UpdateTaskStatusRequest,
    options?: RequestOptions,
  ): Promise<operations.UpdateTaskStatusResponse> {
    return unwrapAsync(tasksUpdateTaskStatus(
      this,
      request,
      options,
    ));
  }
}
